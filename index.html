<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Astro-Dodge</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      text-align: center;
      font-family: sans-serif;
      overflow: hidden;
    }
    #gameCanvas {
      background: black;
      display: block;
      margin: auto;
    }
    #controls {
      margin: 10px;
    }
    button, select {
      font-size: 18px;
      padding: 8px;
      margin: 4px;
    }
    #joystick {
      position: fixed;
      bottom: 40px;
      left: 40px;
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      touch-action: none;
    }
    #joystick-knob {
      position: absolute;
      top: 35px;
      left: 35px;
      width: 30px;
      height: 30px;
      background: rgba(255,255,255,0.7);
      border-radius: 50%;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>ðŸš€ Astro-Dodge</h1>
  <div id="controls">
    <button onclick="startGame()">Start</button>
    <select id="difficulty">
      <option value="1">Easy</option>
      <option value="2">Medium</option>
      <option value="3">Hard</option>
    </select>
  </div>
  <canvas id="gameCanvas"></canvas>

  <div id="joystick">
    <div id="joystick-knob"></div>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let shipX, shipY, shipSize, speed, asteroids, score, gameRunning;
    let joystick = document.getElementById("joystick");
    let knob = document.getElementById("joystick-knob");
    let joyActive = false, joyStartX = 0, joyCurrentX = 0;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight * 0.8;
      shipSize = 40;
      shipX = canvas.width / 2 - shipSize / 2;
      shipY = canvas.height - shipSize - 10;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function startGame() {
      speed = parseInt(document.getElementById("difficulty").value);
      asteroids = [];
      score = 0;
      gameRunning = true;
      gameLoop();
    }

    function gameLoop() {
      if (!gameRunning) return;
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    function update() {
      // joystick movement
      if (joyActive) {
        let dx = joyCurrentX - joyStartX;
        shipX += dx * 0.05; // adjust sensitivity here
        if (shipX < 0) shipX = 0;
        if (shipX + shipSize > canvas.width) shipX = canvas.width - shipSize;
      }

      // spawn asteroids
      if (Math.random() < 0.05) {
        asteroids.push({ x: Math.random() * (canvas.width - 20), y: -20, size: 20 });
      }
      // move asteroids
      for (let a of asteroids) {
        a.y += speed * 2;
        if (a.y > canvas.height) {
          score++;
        }
      }
      // collision check
      for (let a of asteroids) {
        if (a.x < shipX + shipSize &&
            a.x + a.size > shipX &&
            a.y < shipY + shipSize &&
            a.y + a.size > shipY) {
          gameRunning = false;
          alert("Game Over! Score: " + score);
        }
      }
      asteroids = asteroids.filter(a => a.y < canvas.height);
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // draw ship
      ctx.fillStyle = "white";
      ctx.fillRect(shipX, shipY, shipSize, shipSize);
      // draw asteroids
      ctx.fillStyle = "red";
      for (let a of asteroids) {
        ctx.fillRect(a.x, a.y, a.size, a.size);
      }
      // draw score
      ctx.fillStyle = "white";
      ctx.font = "20px Arial";
      ctx.fillText("Score: " + score, 10, 20);
    }

    // Keyboard controls
    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft") shipX -= 20;
      if (e.key === "ArrowRight") shipX += 20;
    });

    // Joystick controls
    joystick.addEventListener("touchstart", e => {
      joyActive = true;
      joyStartX = e.touches[0].clientX;
      joyCurrentX = joyStartX;
    });
    joystick.addEventListener("touchmove", e => {
      joyCurrentX = e.touches[0].clientX;
      let dx = joyCurrentX - joyStartX;
      let maxDist = 40;
      if (dx > maxDist) dx = maxDist;
      if (dx < -maxDist) dx = -maxDist;
      knob.style.left = (35 + dx) + "px";
    });
    joystick.addEventListener("touchend", () => {
      joyActive = false;
      knob.style.left = "35px";
    });
  </script>
</body>
</html>    </select>
  </div>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let shipX, shipY, shipSize, speed, asteroids, score, gameRunning;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight * 0.8;
      shipSize = 40;
      shipX = canvas.width / 2 - shipSize / 2;
      shipY = canvas.height - shipSize - 10;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function startGame() {
      speed = parseInt(document.getElementById("difficulty").value);
      asteroids = [];
      score = 0;
      gameRunning = true;
      gameLoop();
    }

    function gameLoop() {
      if (!gameRunning) return;
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    function update() {
      // spawn asteroids
      if (Math.random() < 0.05) {
        asteroids.push({ x: Math.random() * (canvas.width - 20), y: -20, size: 20 });
      }
      // move asteroids
      for (let a of asteroids) {
        a.y += speed * 2;
        if (a.y > canvas.height) {
          score++;
        }
      }
      // collision check
      for (let a of asteroids) {
        if (a.x < shipX + shipSize &&
            a.x + a.size > shipX &&
            a.y < shipY + shipSize &&
            a.y + a.size > shipY) {
          gameRunning = false;
          alert("Game Over! Score: " + score);
        }
      }
      // remove off-screen asteroids
      asteroids = asteroids.filter(a => a.y < canvas.height);
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // draw ship
      ctx.fillStyle = "white";
      ctx.fillRect(shipX, shipY, shipSize, shipSize);
      // draw asteroids
      ctx.fillStyle = "red";
      for (let a of asteroids) {
        ctx.fillRect(a.x, a.y, a.size, a.size);
      }
      // draw score
      ctx.fillStyle = "white";
      ctx.font = "20px Arial";
      ctx.fillText("Score: " + score, 10, 20);
    }

    // Touch & keyboard controls
    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft") shipX -= 20;
      if (e.key === "ArrowRight") shipX += 20;
    });

    canvas.addEventListener("touchstart", e => {
      const touchX = e.touches[0].clientX;
      if (touchX < canvas.width / 2) {
        shipX -= 30;
      } else {
        shipX += 30;
      }
    });
  </script>
</body>
</html>      ctx.moveTo(ship.x, ship.y - ship.size / 2);
      ctx.lineTo(ship.x - ship.size / 2, ship.y + ship.size / 2);
      ctx.lineTo(ship.x + ship.size / 2, ship.y + ship.size / 2);
      ctx.closePath();
      ctx.fill();
    }

    function drawAsteroids() {
      ctx.fillStyle = "red";
      for (let a of asteroids) {
        ctx.beginPath();
        ctx.arc(a.x, a.y, a.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function updateAsteroids() {
      for (let a of asteroids) {
        a.y += a.speed;
        if (a.y > canvas.height + a.size) {
          asteroids.splice(asteroids.indexOf(a), 1);
          score++;
        }
        // Collision detection
        if (
          a.x > ship.x - ship.size / 2 &&
          a.x < ship.x + ship.size / 2 &&
          a.y + a.size > ship.y - ship.size / 2 &&
          a.y - a.size < ship.y + ship.size / 2
        ) {
          gameOver = true;
        }
      }
    }

    function spawnAsteroid() {
      let size = Math.random() * 20 + 10;
      let x = Math.random() * (canvas.width - size * 2) + size;
      let y = -size;
      let speed = Math.random() * 3 + 2;
      asteroids.push({ x, y, size, speed });
    }

    function drawScore() {
      ctx.fillStyle = "white";
      ctx.font = "20px Arial";
      ctx.fillText("Score: " + score, 10, 30);
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (!gameOver) {
        drawShip();
        drawAsteroids();
        updateAsteroids();
        drawScore();
        requestAnimationFrame(gameLoop);
      } else {
        ctx.fillStyle = "white";
        ctx.font = "40px Arial";
        ctx.fillText("Game Over!", canvas.width / 2 - 100, canvas.height / 2);
        ctx.font = "20px Arial";
        ctx.fillText("Final Score: " + score, canvas.width / 2 - 60, canvas.height / 2 + 30);
      }
    }

    // Touch controls
    document.addEventListener("touchmove", (e) => {
      let touch = e.touches[0];
      ship.x = touch.clientX;
    });

    // Spawn asteroids periodically
    setInterval(spawnAsteroid, 700);

    gameLoop();
  </script>
</body>
</html>
