<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Astro Dodge</title>
<style>
  body { background: #050814; color: white; font-family: system-ui, Arial; text-align: center; margin: 0; padding: 0; }
  #gameCanvas { display: block; margin: 0 auto; background: black; border-radius: 8px; }
  .controls { margin-top: 10px; }
</style>
</head>
<body>
<h1>Astro Dodge</h1>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<div class="controls">
  <label for="difficulty">Difficulty:</label>
  <select id="difficulty">
    <option value="easy">Easy</option>
    <option value="normal" selected>Normal</option>
    <option value="hard">Hard</option>
  </select>
  <button id="startBtn">Start</button>
  <button id="resetHigh">Reset High Score</button>
</div>
<p>Controls: Arrow keys or A/D to move, space to start. On mobile tap left/right side to move.</p>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let running = false, score = 0, highScore = Number(localStorage.getItem('astro_high') || 0);
let difficulty = 'normal';
let playerX = 400, playerY = 540, playerW = 40, playerH = 24, speed = 5;
let asteroids = [], spawnTimer = 0, spawnInterval = 60, frames = 0, moveLeft = false, moveRight = false, over = false;document.getElementById('difficulty').onchange = e => { difficulty = e.target.value; if (difficulty === 'easy') { spawnInterval = 90; speed = 4; } if (difficulty === 'normal') { spawnInterval = 60; speed = 5; } if (difficulty === 'hard') { spawnInterval = 40; speed = 6; } };

document.getElementById('startBtn').onclick = () => { if (!running) startGame(); else stopGame(); }; document.getElementById('resetHigh').onclick = () => { highScore = 0; localStorage.removeItem('astro_high'); };

window.addEventListener('keydown', e => { if (e.key === 'ArrowLeft' || e.key === 'a') moveLeft = true; if (e.key === 'ArrowRight' || e.key === 'd') moveRight = true; if (e.key === ' ' && !running) startGame(); }); window.addEventListener('keyup', e => { if (e.key === 'ArrowLeft' || e.key === 'a') moveLeft = false; if (e.key === 'ArrowRight' || e.key === 'd') moveRight = false; }); canvas.addEventListener('mousedown', e => { const mid = canvas.width/2; moveLeft = e.offsetX < mid; moveRight = e.offsetX >= mid; }); window.addEventListener('mouseup', () => { moveLeft = false; moveRight = false; });

function spawnAsteroid() { const size = 12 + Math.random()36; const x = Math.random()(canvas.width - size) + size/2; const vy = 1.2 + Math.random()*(speed + 1); asteroids.push({ x, y: -size, r: size/2, vy, rot: Math.random()*Math.PI }); } function resetGame() { asteroids = []; spawnTimer = 0; frames = 0; over = false; score = 0; } function startGame() { resetGame(); running = true; requestAnimationFrame(loop); } function stopGame() { running = false; }

function update() { frames++; if (moveLeft) playerX -= speed; if (moveRight) playerX += speed; playerX = Math.max(playerW/2, Math.min(canvas.width - playerW/2, playerX)); spawnTimer++; if (spawnTimer >= spawnInterval) { spawnAsteroid(); spawnTimer = 0; } for (let i = asteroids.length - 1; i >= 0; i--) { let a = asteroids[i]; a.y += a.vy; a.rot += 0.02; if (a.y - a.r > canvas.height) { asteroids.splice(i,1); score++; } } for (const a of asteroids) { const closestX = Math.max(playerX - playerW/2, Math.min(a.x, playerX + playerW/2)); const closestY = Math.max(playerY - playerH/2, Math.min(a.y, playerY + playerH/2)); const dx = a.x - closestX, dy = a.y - closestY; if (dxdx + dydy < a.r * a.r) over = true; } } function draw() { ctx.fillStyle = '#050814'; ctx.fillRect(0,0,canvas.width,canvas.height); for (let i=0;i<80;i++){ const x = (i * 97) % canvas.width; const y = ((i53) + (frames % canvas.height)) % canvas.height; ctx.fillStyle = i%17===0 ? '#FFF' : '#7f8fa6'; ctx.fillRect(x, y, 1,1); } ctx.save(); ctx.translate(playerX, playerY); ctx.fillStyle = '#ffd166'; ctx.beginPath(); ctx.moveTo(0, -playerH/2); ctx.lineTo(-playerW/2, playerH/2); ctx.lineTo(playerW/2, playerH/2); ctx.closePath(); ctx.fill(); ctx.restore(); for (const a of asteroids) { ctx.save(); ctx.translate(a.x, a.y); ctx.rotate(a.rot); ctx.beginPath(); for (let i=0;i<6;i++){ const ang = (i/6) * Math.PI2; const rad = a.r * (0.7 + Math.random()*0.6); const x = Math.cos(ang) * rad, y = Math.sin(ang) * rad; if (i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y); } ctx.closePath(); ctx.fillStyle = '#6b6b6b'; ctx.fill(); ctx.restore(); } ctx.fillStyle = 'white'; ctx.fillText('Score: ' + score, 12, 22); ctx.fillText('High: ' + highScore, 12, 42); } function loop() { if (!over) { update(); draw(); requestAnimationFrame(loop); } else { running = false; if (score > highScore) { highScore = score; localStorage.setItem('astro_high', highScore); } ctx.fillStyle = 'rgba(0,0,0,0.7)'; ctx.fillRect(canvas.width/2 - 160, canvas.height/2 - 70, 320, 140); ctx.fillStyle = '#fff'; ctx.textAlign = 'center'; ctx.font = '20px Arial'; ctx.fillText('Game Over', canvas.width/2, canvas.height/2 - 20); ctx.fillText('Score: ' + score, canvas.width/2, canvas.height/2 + 4); ctx.fillText('High: ' + highScore, canvas.width/2, canvas.height/2 + 32); ctx.textAlign = 'left'; } } </script>

</body>
</html>
